"use strict";var restaurants=void 0,neighborhoods=void 0,cuisines=void 0,newMap,markers=[];function initiateDatabase(){DBHelper.fetchRestaurants("restaurants/")}function initPage(){initMap(),DBHelper.fetchNeighborhoods(),DBHelper.fetchCuisines()}function fetchNeighborhoods(error,neighborhoods){error?console.error(error):(self.neighborhoods=neighborhoods,fillNeighborhoodsHTML())}function fillNeighborhoodsHTML(){var neighborhoods=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,select=document.getElementById("neighborhoods-select");neighborhoods.forEach(function(neighborhood){var option=document.createElement("option");option.innerHTML=neighborhood,option.value=neighborhood,select.append(option)})}function fetchCuisines(error,cuisines){error?console.error(error):(self.cuisines=cuisines,fillCuisinesHTML())}function fillCuisinesHTML(){var cuisines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.cuisines,select=document.getElementById("cuisines-select");cuisines.forEach(function(cuisine){var option=document.createElement("option");option.innerHTML=cuisine,option.value=cuisine,select.append(option)})}function initMap(){self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYm9vZWxsZWFuIiwiYSI6ImNqaXo3eHdodDA0YW4zcXBjMjd6dXowZnIifQ.d5RF4w_C9ppt_nAyldHBXQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),updateRestaurants()}function updateRestaurants(){var cSelect=document.getElementById("cuisines-select"),nSelect=document.getElementById("neighborhoods-select"),cIndex=cSelect.selectedIndex,nIndex=nSelect.selectedIndex,cuisine=cSelect[cIndex].value,neighborhood=nSelect[nIndex].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine,neighborhood)}function fillUpdatedRestaurants(error,restaurants){error?console.error(error):(resetRestaurants(restaurants),fillRestaurantsHTML())}function resetRestaurants(restaurants){var ul;self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(marker){return marker.remove()}),self.markers=[],self.restaurants=restaurants}function fillRestaurantsHTML(){var restaurants=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurants,ul=document.getElementById("restaurants-list");restaurants.forEach(function(restaurant){ul.append(createRestaurantHTML(restaurant))}),addMarkersToMap()}function createRestaurantHTML(restaurant){var li=document.createElement("li"),newId=restaurant.name.replace(/[^A-Za-z0-9]/g,"");li.setAttribute("id",newId),li.setAttribute("tabindex","-1"),observer.observe(li);var divDescript=document.createElement("div");divDescript.setAttribute("aria-label",restaurant.name+" restaurant. Please Use Arrow Keys to View Items."),divDescript.className="list-item-describor focus-item",li.append(divDescript);var favBoolean=restaurant.is_favorite,favWord=void 0,safeName=String(restaurant.name).replace("'","");console.log(favBoolean);var favorite=document.createElement("button");favorite.className=0==favBoolean||void 0==favBoolean?"star-empty focus-item":"star-full focus-item",favWord=0==favBoolean||void 0==favBoolean?"not Favorite":"Favorite",0==favBoolean||void 0==favBoolean?favorite.setAttribute("data-name","false"):favorite.setAttribute("data-name","true"),favorite.setAttribute("id","button"+restaurant.id),favorite.setAttribute("onclick","DBHelper.toggleFavorite("+restaurant.id+",'"+safeName+"', event)"),favorite.setAttribute("aria-label","Toggle Favorites: "+restaurant.name+" is currently "+favWord),li.append(favorite);var image=document.createElement("img");image.className="focus-item restaurant-img lazy-load",image.setAttribute("id",restaurant.id),image.setAttribute("alt",restaurant.alt),li.append(image);var name=document.createElement("h2");name.innerHTML=restaurant.name,name.className="focus-item lazy-load",li.append(name);var neighborhood=document.createElement("p");neighborhood.innerHTML=restaurant.neighborhood,neighborhood.className="focus-item lazy-load",li.append(neighborhood);var address=document.createElement("p");address.innerHTML=restaurant.address,address.className="focus-item  lazy-load",li.append(address);var more=document.createElement("a");return more.setAttribute("aria-label","View details and reviews of restaurant "+restaurant.name),more.innerHTML="View Details",more.className="focus-item lazy-load",more.href=DBHelper.urlForRestaurant(restaurant),li.append(more),li}function addMarkersToMap(){var restaurants=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurants,mapBox=document.getElementById("map"),skiplink=document.createElement("a");skiplink.className="skip-link",skiplink.href="#restaurants-list",skiplink.setAttribute("aria-label","Skip link: skip Mapbox map and jump to restaurant content."),skiplink.setAttribute("tabindex","0"),mapBox.prepend(skiplink),restaurants.forEach(function(restaurant){var marker=DBHelper.mapMarkerForRestaurant(restaurant,self.newMap);function onClick(){window.location.href=marker.options.url}marker.on("click",onClick),self.markers.push(marker)}),indexObjects()}window.addEventListener("load",initiateDatabase);