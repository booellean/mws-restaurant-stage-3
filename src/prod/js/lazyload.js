"use strict";var options={root:null,rootMargin:"0px",threshold:.1},observer=new IntersectionObserver(lazyLoad,options);function lazyLoad(elements){elements.forEach(function(el){el.intersectionRatio>.1&&(loadItem(el.target),observer.unobserve(el.target))})}function loadItem(el){var childs=el.children,childrenEls;Array.from(childs).forEach(function(child){var restaurantId=child.id;if(!(child instanceof HTMLImageElement))return child.classList.remove("lazy-load");child instanceof HTMLImageElement&&dbPromise.then(function(db){return db.transaction("restaurant").objectStore("restaurant").getAll()}).then(function(restaurants){var restObject,restaurant=restaurants.filter(function(item){return item.id==restaurantId})[0];child.setAttribute("srcset",DBHelper.imageSrcsetForRestaurant(restaurant)),child.setAttribute("sizes",DBHelper.imageSizesForRestaurant(restaurant)),child.src=DBHelper.imageUrlForRestaurant(restaurant),child.classList.remove("lazy-load")})})}